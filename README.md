<p align="center">
  <img src="https://img.shields.io/badge/Pipeline-6%20Phases-blue?style=for-the-badge" alt="6 Phases" />
  <img src="https://img.shields.io/badge/AI%20Analyses-20-green?style=for-the-badge" alt="20 AI Analyses" />
  <img src="https://img.shields.io/badge/Reports-17%20Types-orange?style=for-the-badge" alt="17 Reports" />
  <img src="https://img.shields.io/badge/Dimensions-12-purple?style=for-the-badge" alt="12 Dimensions" />
  <img src="https://img.shields.io/badge/Claude-Opus%204.5-red?style=for-the-badge" alt="Claude Opus 4.5" />
</p>

# BizHealth Report Pipeline

> **An enterprise-grade, AI-powered business health assessment system that transforms 87 questionnaire responses into comprehensive strategic intelligence through a sophisticated six-phase analysis pipeline, generating 17 professional HTML reports with actionable insights.**

---

## Table of Contents

- [Executive Overview](#executive-overview)
- [Key Features](#key-features)
- [System Architecture](#system-architecture)
- [The Business Assessment Framework](#the-business-assessment-framework)
  - [Four Strategic Chapters](#four-strategic-chapters)
  - [Twelve Business Dimensions](#twelve-business-dimensions)
  - [87 Assessment Questions](#87-assessment-questions)
  - [Health Scoring System](#health-scoring-system)
- [The Six-Phase Pipeline](#the-six-phase-pipeline)
  - [Phase 0: Raw Capture & Normalization](#phase-0-raw-capture--normalization)
  - [Phase 1: Cross-functional AI Analyses](#phase-1-cross-functional-ai-analyses)
  - [Phase 2: Deep-dive Cross-analysis](#phase-2-deep-dive-cross-analysis)
  - [Phase 3: Executive Synthesis](#phase-3-executive-synthesis)
  - [Phase 4: IDM Consolidation](#phase-4-idm-consolidation)
  - [Phase 5: Report Generation](#phase-5-report-generation)
- [The Insights Data Model (IDM)](#the-insights-data-model-idm)
- [Report Types & Audiences](#report-types--audiences)
- [AI & Machine Learning](#ai--machine-learning)
- [Getting Started](#getting-started)
  - [Prerequisites](#prerequisites)
  - [Installation](#installation)
  - [Configuration](#configuration)
  - [Running the Pipeline](#running-the-pipeline)
- [Project Structure](#project-structure)
- [Technology Stack](#technology-stack)
- [API Reference](#api-reference)
- [Performance & Cost](#performance--cost)
- [Troubleshooting](#troubleshooting)
- [Contributing](#contributing)
- [License](#license)

---

## Executive Overview

BizHealth Report Pipeline is a **production-ready, enterprise-scale business intelligence platform** that leverages **Anthropic's Claude Opus 4.5** with extended thinking capabilities to deliver deep, actionable business insights.

### What It Does

1. **Ingests** a 87-question business assessment questionnaire
2. **Analyzes** responses across 12 business dimensions using 20 AI analyses
3. **Synthesizes** findings into a unified Insights Data Model (IDM)
4. **Generates** 17 professional HTML reports tailored to different stakeholders

### System Metrics At A Glance

| Metric | Value | Description |
|--------|-------|-------------|
| **Pipeline Phases** | 6 | Complete end-to-end processing |
| **AI Analyses** | 20 | 10 Tier 1 + 5 Tier 2 + 5 Synthesis |
| **Report Types** | 17 | Executive, Strategic, Deep Dive, Manager |
| **Business Dimensions** | 12 | Comprehensive business coverage |
| **Strategic Chapters** | 4 | Logical groupings of dimensions |
| **Questions Analyzed** | 87 | Complete questionnaire assessment |
| **Execution Time** | 10-15 min | Full pipeline completion |
| **Cost Per Assessment** | $10-20 | Using Anthropic Batch API |
| **Token Usage** | ~550K | Per complete assessment |
| **Output Size** | ~600KB | HTML reports + JSON data |

### Why BizHealth?

- **Deep Analysis**: Extended thinking with 32K token budget per analysis
- **Cost Efficient**: 50% savings via Anthropic Batch API
- **Comprehensive**: 17 reports for every stakeholder level
- **Actionable**: Quick wins, roadmaps, and prioritized recommendations
- **Benchmarked**: Industry comparison with percentile rankings
- **Validated**: Zod schema validation at every data boundary

---

## Key Features

### AI-Powered Analysis Engine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLAUDE OPUS 4.5 CAPABILITIES                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Extended Thinking     â”‚  32,000 token reasoning budget         â”‚
â”‚  Max Output           â”‚  64,000 tokens per analysis             â”‚
â”‚  Batch Processing     â”‚  50% cost reduction                     â”‚
â”‚  Temperature          â”‚  1.0 (required for thinking)            â”‚
â”‚  Parallel Execution   â”‚  Up to 5 analyses per batch             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Multi-Tier Analysis Architecture

```
                    TIER 1 (Foundational)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Revenue    â”‚  Operational  â”‚  Financial    â”‚
    â”‚  Engine     â”‚  Excellence   â”‚  Strategic    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  People &   â”‚  Compliance & â”‚               â”‚
    â”‚  Leadership â”‚  Sustainability               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    TIER 2 (Interconnection)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Growth     â”‚  Market       â”‚  Resource     â”‚
    â”‚  Readiness  â”‚  Position     â”‚  Optimization â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  Risk &     â”‚  Scalability  â”‚               â”‚
    â”‚  Resilience â”‚  Readiness    â”‚               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    SYNTHESIS (Cross-Dimensional)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Cross-Dimensional  â”‚  Strategic Recs       â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  Consolidated Risks â”‚  Growth Opportunities â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  Implementation Roadmap                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Canonical Insights Data Model

The IDM serves as the **single source of truth** for all report generation:

```typescript
interface IDM {
  metadata: IDMMetadata;           // Assessment info
  scores_summary: ScoresSummary;   // Health scores (0-100)
  chapters: Chapter[];             // 4 strategic chapters
  findings: Finding[];             // Key discoveries
  recommendations: Recommendation[];// Prioritized actions
  quick_wins: QuickWin[];          // Immediate opportunities
  risks: Risk[];                   // Identified threats
  roadmap: RoadmapPhase[];         // Implementation plan
  visualizations: Visualization[]; // Chart data
}
```

### 17 Professional Report Types

| Category | Reports | Audience |
|----------|---------|----------|
| **Executive** | Comprehensive, Owner, Executive Brief | Board, C-Suite, Owners |
| **Strategic** | Quick Wins, Risk, Roadmap, Financial | Strategy, Operations |
| **Deep Dive** | GE, PH, PL, RS chapters | Department Heads |
| **Manager** | 6 role-specific reports | Functional Managers |

---

## System Architecture

### Complete Pipeline Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                   INPUT LAYER                                        â”‚
â”‚                          sample_webhook.json (Questionnaire)                         â”‚
â”‚                          87 Questions + Company Profile Data                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 0: RAW CAPTURE & NORMALIZATION                              Duration: ~100ms â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Phase 0A              â”‚  â”‚ Phase 0B              â”‚  â”‚ Benchmark             â”‚   â”‚
â”‚  â”‚ Raw Capture           â”‚â†’ â”‚ Normalization         â”‚â†’ â”‚ Retrieval             â”‚   â”‚
â”‚  â”‚ â€¢ Immutable storage   â”‚  â”‚ â€¢ Company profile     â”‚  â”‚ â€¢ Industry matching   â”‚   â”‚
â”‚  â”‚ â€¢ Audit metadata      â”‚  â”‚ â€¢ Questionnaire       â”‚  â”‚ â€¢ Percentile data     â”‚   â”‚
â”‚  â”‚ â€¢ UUID generation     â”‚  â”‚ â€¢ Score calculation   â”‚  â”‚ â€¢ Hierarchical fallbackâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚  Output: phase0_output.json (~95KB)                                                  â”‚
â”‚  â€¢ NormalizedCompanyProfile    â€¢ NormalizedQuestionnaireResponses                   â”‚
â”‚  â€¢ NormalizedBenchmarkData     â€¢ AssessmentIndexEntry                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 1: CROSS-FUNCTIONAL AI ANALYSES (Anthropic Batch API)       Duration: 4-5min â”‚
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ TIER 1: FOUNDATIONAL ANALYSES (5)                            ~160K tokens   â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚   â”‚
â”‚  â”‚ â”‚ Revenue Engine  â”‚ â”‚ Operational     â”‚ â”‚ Financial       â”‚                 â”‚   â”‚
â”‚  â”‚ â”‚ STR+SAL+MKT+CXP â”‚ â”‚ Excellence      â”‚ â”‚ Strategic       â”‚                 â”‚   â”‚
â”‚  â”‚ â”‚                 â”‚ â”‚ OPS focus       â”‚ â”‚ FIN focus       â”‚                 â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚   â”‚
â”‚  â”‚ â”‚ People &        â”‚ â”‚ Compliance &    â”‚                                     â”‚   â”‚
â”‚  â”‚ â”‚ Leadership      â”‚ â”‚ Sustainability  â”‚                                     â”‚   â”‚
â”‚  â”‚ â”‚ HRS+LDG         â”‚ â”‚ RMS+CMP         â”‚                                     â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚                                          â”‚
â”‚                                          â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ TIER 2: INTERCONNECTION ANALYSES (5)                         ~160K tokens   â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚   â”‚
â”‚  â”‚ â”‚ Growth          â”‚ â”‚ Market          â”‚ â”‚ Resource        â”‚                 â”‚   â”‚
â”‚  â”‚ â”‚ Readiness       â”‚ â”‚ Position        â”‚ â”‚ Optimization    â”‚                 â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚   â”‚
â”‚  â”‚ â”‚ Risk &          â”‚ â”‚ Scalability     â”‚                                     â”‚   â”‚
â”‚  â”‚ â”‚ Resilience      â”‚ â”‚ Readiness       â”‚                                     â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚  Output: phase1_output.json (~376KB)                                                â”‚
â”‚  â€¢ 10 complete analysis results with narratives and visualizations                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 2: DEEP-DIVE CROSS-ANALYSIS (Anthropic Batch API)           Duration: 2-3min â”‚
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ Cross-          â”‚ â”‚ Strategic       â”‚ â”‚ Consolidated    â”‚                        â”‚
â”‚  â”‚ Dimensional     â”‚ â”‚ Recommendations â”‚ â”‚ Risks           â”‚                        â”‚
â”‚  â”‚ Synthesis       â”‚ â”‚                 â”‚ â”‚                 â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚ Growth          â”‚ â”‚ Implementation  â”‚                                            â”‚
â”‚  â”‚ Opportunities   â”‚ â”‚ Roadmap         â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚                                                                                      â”‚
â”‚  Output: phase2_output.json (~428KB)                                                â”‚
â”‚  â€¢ 5 synthesis analyses   â€¢ 15+ strategic recommendations                          â”‚
â”‚  â€¢ 18+ consolidated risks â€¢ 10+ growth opportunities                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 3: EXECUTIVE SYNTHESIS (Anthropic Batch API)                Duration: 2-3min â”‚
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ Executive       â”‚ â”‚ Scorecard       â”‚ â”‚ Action          â”‚                        â”‚
â”‚  â”‚ Summary         â”‚ â”‚ (Health Score)  â”‚ â”‚ Matrix          â”‚                        â”‚
â”‚  â”‚ 2-3 pages       â”‚ â”‚ 0-100 scale     â”‚ â”‚ Priority grid   â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚ Investment      â”‚ â”‚ Final           â”‚                                            â”‚
â”‚  â”‚ Roadmap         â”‚ â”‚ Recommendations â”‚                                            â”‚
â”‚  â”‚ ROI projections â”‚ â”‚ Risk-adjusted   â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚                                                                                      â”‚
â”‚  Output: phase3_output.json                                                          â”‚
â”‚  â€¢ Overall health score (0-100)  â€¢ Chapter-level scores                             â”‚
â”‚  â€¢ Critical risk count           â€¢ Investment requirements                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 4: IDM CONSOLIDATION (No AI - Data Transformation)           Duration: <1sec â”‚
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                       INSIGHTS DATA MODEL (IDM)                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚
â”‚  â”‚  â”‚ metadata     â”‚ â”‚ scores_      â”‚ â”‚ chapters[4]  â”‚ â”‚ findings[]   â”‚       â”‚   â”‚
â”‚  â”‚  â”‚              â”‚ â”‚ summary      â”‚ â”‚ dimensions   â”‚ â”‚              â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ run_id     â”‚ â”‚ â€¢ overall    â”‚ â”‚ [12]         â”‚ â”‚ â€¢ strengths  â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ company    â”‚ â”‚ â€¢ chapters   â”‚ â”‚ â€¢ questions  â”‚ â”‚ â€¢ weaknesses â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ timestamp  â”‚ â”‚ â€¢ dimensions â”‚ â”‚ â€¢ narratives â”‚ â”‚ â€¢ opportun.  â”‚       â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚
â”‚  â”‚  â”‚ recommend-   â”‚ â”‚ quick_wins[] â”‚ â”‚ risks[]      â”‚ â”‚ roadmap[]    â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ ations[]     â”‚ â”‚              â”‚ â”‚              â”‚ â”‚              â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ priority   â”‚ â”‚ â€¢ high impactâ”‚ â”‚ â€¢ severity   â”‚ â”‚ â€¢ phases     â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ effort     â”‚ â”‚ â€¢ low effort â”‚ â”‚ â€¢ likelihood â”‚ â”‚ â€¢ timeline   â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ ROI        â”‚ â”‚ â€¢ immediate  â”‚ â”‚ â€¢ mitigation â”‚ â”‚ â€¢ investment â”‚       â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚   â”‚
â”‚  â”‚  â”‚ visualiz-    â”‚  Consolidation Functions:                                 â”‚   â”‚
â”‚  â”‚  â”‚ ations[]     â”‚  â€¢ extractQuestions()      â€¢ buildDimensions()            â”‚   â”‚
â”‚  â”‚  â”‚              â”‚  â€¢ buildChapters()         â€¢ extractFindings()            â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ gauges     â”‚  â€¢ extractRecommendations()â€¢ identifyQuickWins()          â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ charts     â”‚  â€¢ extractRisks()          â€¢ buildRoadmap()               â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ tables     â”‚  â€¢ calculateScores()       â€¢ Zod validation               â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚  Output: phase4_output.json + idm_output.json (~63KB)                               â”‚
â”‚  â€¢ Canonical data model validated with Zod schemas                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 5: REPORT GENERATION (No AI - HTML Template Rendering)       Duration: ~100msâ”‚
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ EXECUTIVE REPORTS (3)                                                       â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚  â”‚ â”‚ comprehensive.html â”‚ owner.html        â”‚ executiveBrief.html            â”‚â”‚   â”‚
â”‚  â”‚ â”‚ ~50 pages          â”‚ ~20 pages         â”‚ 2-3 pages                      â”‚â”‚   â”‚
â”‚  â”‚ â”‚ Board/Executives   â”‚ Business Owners   â”‚ C-Suite                        â”‚â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ STRATEGIC REPORTS (4)                                                       â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚  â”‚ â”‚ quickWins.html     â”‚ risk.html         â”‚ roadmap.html  â”‚ financial.html â”‚â”‚   â”‚
â”‚  â”‚ â”‚ Immediate actions  â”‚ Risk inventory    â”‚ Phased plan   â”‚ ROI analysis   â”‚â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ CHAPTER DEEP DIVES (4)                                                      â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚  â”‚ â”‚ deep-dive-ge.html  â”‚ deep-dive-ph.html â”‚ deep-dive-pl.html              â”‚â”‚   â”‚
â”‚  â”‚ â”‚ Growth Engine      â”‚ Performance       â”‚ People & Leadership            â”‚â”‚   â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚   â”‚
â”‚  â”‚ â”‚ deep-dive-rs.html                                                       â”‚â”‚   â”‚
â”‚  â”‚ â”‚ Resilience & Safeguards                                                 â”‚â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ MANAGER REPORTS (6)                                                         â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚  â”‚ â”‚ employees.html          â”‚ managersOperations.html                       â”‚â”‚   â”‚
â”‚  â”‚ â”‚ managersSalesMarketing.html â”‚ managersFinancials.html                   â”‚â”‚   â”‚
â”‚  â”‚ â”‚ managersStrategy.html   â”‚ managersItTechnology.html                     â”‚â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚  Output: output/reports/{run-id}/                                                   â”‚
â”‚  â€¢ 17 HTML reports + manifest.json                                                  â”‚
â”‚  â€¢ Professional styling with BizHealth branding                                     â”‚
â”‚  â€¢ Interactive charts (D3.js) and visualizations                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## The Business Assessment Framework

### Four Strategic Chapters

The BizHealth framework organizes business health into four strategic chapters:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           BIZHEALTH STRATEGIC FRAMEWORK                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚      GROWTH ENGINE (GE)     â”‚    â”‚  PERFORMANCE & HEALTH (PH)  â”‚                â”‚
â”‚  â”‚                             â”‚    â”‚                             â”‚                â”‚
â”‚  â”‚  Strategy (STR)       10%   â”‚    â”‚  Operations (OPS)      9%   â”‚                â”‚
â”‚  â”‚  Sales (SAL)           9%   â”‚    â”‚  Financials (FIN)     10%   â”‚                â”‚
â”‚  â”‚  Marketing (MKT)       8%   â”‚    â”‚                             â”‚                â”‚
â”‚  â”‚  Customer Exp (CXP)    8%   â”‚    â”‚  Total Weight:        19%   â”‚                â”‚
â”‚  â”‚                             â”‚    â”‚                             â”‚                â”‚
â”‚  â”‚  Total Weight:        35%   â”‚    â”‚  Focus: Operational         â”‚                â”‚
â”‚  â”‚                             â”‚    â”‚  efficiency and financial   â”‚                â”‚
â”‚  â”‚  Focus: Revenue generation, â”‚    â”‚  health                     â”‚                â”‚
â”‚  â”‚  market positioning, and    â”‚    â”‚                             â”‚                â”‚
â”‚  â”‚  customer relationships     â”‚    â”‚                             â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  PEOPLE & LEADERSHIP (PL)   â”‚    â”‚ RESILIENCE & SAFEGUARDS (RS)â”‚                â”‚
â”‚  â”‚                             â”‚    â”‚                             â”‚                â”‚
â”‚  â”‚  Human Resources (HRS)  8%  â”‚    â”‚  Tech & Innovation (TIN) 8% â”‚                â”‚
â”‚  â”‚  Leadership (LDG)      10%  â”‚    â”‚  IT/Data/Systems (IDS)  7%  â”‚                â”‚
â”‚  â”‚                             â”‚    â”‚  Risk Management (RMS)  7%  â”‚                â”‚
â”‚  â”‚  Total Weight:        18%   â”‚    â”‚  Compliance (CMP)       6%  â”‚                â”‚
â”‚  â”‚                             â”‚    â”‚                             â”‚                â”‚
â”‚  â”‚  Focus: Talent, culture,    â”‚    â”‚  Total Weight:         28%  â”‚                â”‚
â”‚  â”‚  and leadership             â”‚    â”‚                             â”‚                â”‚
â”‚  â”‚  effectiveness              â”‚    â”‚  Focus: Technology, risk,   â”‚                â”‚
â”‚  â”‚                             â”‚    â”‚  and regulatory compliance  â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Twelve Business Dimensions

| Code | Dimension Name | Chapter | Weight | Questions | Focus Areas |
|------|----------------|---------|--------|-----------|-------------|
| **STR** | Strategy | GE | 10% | 7 | Competitive differentiation, market share, goals, planning |
| **SAL** | Sales | GE | 9% | 8 | Sales mix, pipeline, cycle, close rate, deal size |
| **MKT** | Marketing | GE | 8% | 9 | Brand awareness, channels, CAC, LTV, ROI |
| **CXP** | Customer Experience | GE | 8% | 5 | Satisfaction, NPS, effort score, resolution |
| **OPS** | Operations | PH | 9% | 8 | Efficiency, workflow, inventory, utilization |
| **FIN** | Financials | PH | 10% | 10 | Cash flow, profitability, ratios, forecasting |
| **HRS** | Human Resources | PL | 8% | 8 | Hiring, retention, training, performance |
| **LDG** | Leadership & Governance | PL | 10% | 7 | Decision-making, structure, succession |
| **TIN** | Technology & Innovation | RS | 8% | 8 | Tech adoption, innovation, digital readiness |
| **IDS** | IT, Data & Systems | RS | 7% | 7 | Infrastructure, data management, security |
| **RMS** | Risk Management | RS | 7% | 7 | Risk identification, mitigation, continuity |
| **CMP** | Compliance & Legal | RS | 6% | 3 | Regulatory, legal, contractual compliance |

### 87 Assessment Questions

Questions are distributed across dimensions:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    QUESTION DISTRIBUTION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Growth Engine (GE): 29 Questions                               â”‚
â”‚  â”œâ”€â”€ Strategy:            7 questions (STR_01 - STR_07)        â”‚
â”‚  â”œâ”€â”€ Sales:               8 questions (SAL_01 - SAL_08)        â”‚
â”‚  â”œâ”€â”€ Marketing:           9 questions (MKT_01 - MKT_09)        â”‚
â”‚  â””â”€â”€ Customer Experience: 5 questions (CXP_01 - CXP_05)        â”‚
â”‚                                                                 â”‚
â”‚  Performance & Health (PH): 18 Questions                        â”‚
â”‚  â”œâ”€â”€ Operations:         8 questions (OPS_01 - OPS_08)         â”‚
â”‚  â””â”€â”€ Financials:        10 questions (FIN_01 - FIN_10)         â”‚
â”‚                                                                 â”‚
â”‚  People & Leadership (PL): 15 Questions                         â”‚
â”‚  â”œâ”€â”€ Human Resources:    8 questions (HRS_01 - HRS_08)         â”‚
â”‚  â””â”€â”€ Leadership:         7 questions (LDG_01 - LDG_07)         â”‚
â”‚                                                                 â”‚
â”‚  Resilience & Safeguards (RS): 25 Questions                     â”‚
â”‚  â”œâ”€â”€ Technology:         8 questions (TIN_01 - TIN_08)         â”‚
â”‚  â”œâ”€â”€ IT/Data/Systems:    7 questions (IDS_01 - IDS_07)         â”‚
â”‚  â”œâ”€â”€ Risk Management:    7 questions (RMS_01 - RMS_07)         â”‚
â”‚  â””â”€â”€ Compliance:         3 questions (CMP_01 - CMP_03)         â”‚
â”‚                                                                 â”‚
â”‚  TOTAL: 87 Questions                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Health Scoring System

#### Score Bands

| Band | Score Range | Color | Description |
|------|-------------|-------|-------------|
| **Excellence** | 80-100 | ğŸŸ¢ Green `#28a745` | Exceptional performance, strategic leadership |
| **Proficiency** | 60-79 | ğŸ”µ Blue `#0d6efd` | Solid performance, competitive positioning |
| **Attention** | 40-59 | ğŸŸ¡ Yellow `#ffc107` | Needs improvement, vulnerabilities present |
| **Critical** | 0-39 | ğŸ”´ Red `#dc3545` | Urgent intervention required |

#### Weighted Score Calculation

```typescript
// Dimension weights (total = 1.00)
const DIMENSION_WEIGHTS = {
  STR: 0.10,  // Strategy - high strategic impact
  SAL: 0.09,  // Sales - revenue generation
  MKT: 0.08,  // Marketing - demand generation
  CXP: 0.08,  // Customer Experience - retention
  OPS: 0.09,  // Operations - efficiency
  FIN: 0.10,  // Financials - viability
  HRS: 0.08,  // Human Resources - talent
  LDG: 0.10,  // Leadership - multiplier effect
  TIN: 0.08,  // Technology - innovation
  IDS: 0.07,  // IT/Data - infrastructure
  RMS: 0.07,  // Risk Management - protection
  CMP: 0.06   // Compliance - foundational
};

// Overall score = Î£(dimension_score Ã— dimension_weight)
```

---

## The Six-Phase Pipeline

### Phase 0: Raw Capture & Normalization

**File**: `src/orchestration/phase0-orchestrator.ts`
**Duration**: ~100ms
**AI Calls**: None

#### Sub-Phases

| Sub-Phase | Purpose | Output |
|-----------|---------|--------|
| **Phase 0A** | Raw Capture | Immutable webhook storage with audit metadata |
| **Phase 0B** | Normalization | Structured company profile and questionnaire |
| **Benchmark** | Industry Matching | Percentile distributions for comparison |

#### Data Flow

```
Webhook Input
     â”‚
     â”œâ”€â”€â–º Raw Storage (data/raw/{company}/{run-id}.json)
     â”‚
     â”œâ”€â”€â–º NormalizedCompanyProfile
     â”‚    â”œâ”€â”€ Company metadata
     â”‚    â”œâ”€â”€ Financial data
     â”‚    â”œâ”€â”€ Employee counts
     â”‚    â”œâ”€â”€ Products/services
     â”‚    â””â”€â”€ Benchmark selectors
     â”‚
     â”œâ”€â”€â–º NormalizedQuestionnaireResponses
     â”‚    â”œâ”€â”€ 4 chapters
     â”‚    â”œâ”€â”€ 12 dimensions
     â”‚    â”œâ”€â”€ 87 normalized questions
     â”‚    â”œâ”€â”€ Overall metrics
     â”‚    â””â”€â”€ Derived metrics (ratios)
     â”‚
     â””â”€â”€â–º BenchmarkData
          â”œâ”€â”€ Industry percentiles
          â”œâ”€â”€ Revenue cohort data
          â””â”€â”€ Match level indicator
```

#### Key Types

```typescript
interface Phase0Output {
  assessment_run_id: string;
  companyProfile: NormalizedCompanyProfile;
  questionnaireResponses: NormalizedQuestionnaireResponses;
  benchmarkData: NormalizedBenchmarkData;
  indexEntry: AssessmentIndexEntry;
}

interface NormalizedCompanyProfile {
  metadata: { profile_id, snapshot_id, assessment_run_id, created_at };
  company_name: string;
  location: { city, state, country };
  industry: { code, name, vertical };
  financials: { last_year_revenue, projected_revenue, growth_rate };
  employees: { total_headcount, full_time, part_time, contractors };
  products_services: ProductService[];
  competitors: Competitor[];
  current_challenges: string[];
  benchmark_selectors: BenchmarkSelectors;
}

interface NormalizedQuestionnaireResponses {
  meta: { response_id, assessment_run_id, captured_at };
  chapters: NormalizedChapter[];
  overall_metrics: {
    total_questions: number;        // 87
    completion_rate: number;
    overall_avg_normalized_score: number;
    chapter_scores: Record<ChapterCode, number>;
    dimension_scores: Record<DimensionCode, number>;
  };
  derived_metrics: {
    sales_velocity?: number;
    cac_ltv_ratio?: number;
    cash_ratio?: number;
    debt_to_asset_ratio?: number;
    capacity_utilization_avg?: number;
    growth_gap?: number;
  };
}
```

---

### Phase 1: Cross-functional AI Analyses

**File**: `src/orchestration/phase1-orchestrator.ts`
**Duration**: 4-5 minutes
**AI Calls**: 10 (via Anthropic Batch API)

#### Two-Tier Architecture

**Tier 1: Foundational Analyses** (5 analyses)

| Analysis | Prompt File | Dimensions | Frameworks Applied |
|----------|-------------|------------|-------------------|
| Revenue Engine | `tier1/revenue-engine.prompts.ts` | STR, SAL, MKT, CXP | CLV, Sales Funnel, RevOps, Strategic Planning |
| Operational Excellence | `tier1/operational-excellence.prompts.ts` | OPS | Lean/Six Sigma, OEE, Capacity Planning |
| Financial Strategic | `tier1/financial-strategic.prompts.ts` | FIN | DuPont Analysis, Cash Flow, Working Capital |
| People & Leadership | `tier1/people-leadership.prompts.ts` | HRS, LDG | Employee Lifecycle, Leadership Competency |
| Compliance & Sustainability | `tier1/compliance-sustainability.prompts.ts` | RMS, CMP | GRC, ESG, Risk Management |

**Tier 2: Interconnection Analyses** (5 analyses)

| Analysis | Prompt File | Dependencies | Purpose |
|----------|-------------|--------------|---------|
| Growth Readiness | `tier2/growth-readiness.prompts.ts` | All Tier 1 | Cross-functional growth capability |
| Market Position | `tier2/market-position.prompts.ts` | Revenue Engine | Competitive dynamics |
| Resource Optimization | `tier2/resource-optimization.prompts.ts` | Operational, Financial | Resource efficiency |
| Risk & Resilience | `tier2/risk-resilience.prompts.ts` | All Tier 1 | Risk landscape |
| Scalability Readiness | `tier2/scalability-readiness.prompts.ts` | All Tier 1 | Infrastructure scalability |

#### AI Configuration

```typescript
const PHASE1_AI_CONFIG = {
  model: 'claude-opus-4-5-20251101',
  max_tokens: 64000,
  thinking: {
    type: 'enabled',
    budget_tokens: 32000  // Extended thinking budget
  },
  temperature: 1.0  // Required for extended thinking
};
```

#### Visualization Output Format

Each analysis returns structured JSON with visualizations:

```json
{
  "analysisType": "revenue_engine",
  "narrative": {
    "executiveSummary": "2-3 sentence summary...",
    "sections": [
      {
        "id": "strategy_assessment",
        "title": "Strategy Assessment",
        "content": "As shown in [viz:strategy_health_score]...",
        "visualizationRefs": ["strategy_health_score"]
      }
    ]
  },
  "visualizations": [
    {
      "id": "strategy_health_score",
      "type": "gauge",
      "data": { "value": 72, "max": 100, "benchmark": 65, "trend": "up" },
      "context": { "dimension": "STR", "chapter": "GE" }
    }
  ],
  "metadata": {
    "dimensionsCovered": ["STR", "SAL", "MKT", "CXP"],
    "confidenceLevel": "high",
    "dataQuality": "complete"
  }
}
```

#### Supported Visualization Types

| Type | Purpose | Data Structure |
|------|---------|---------------|
| `gauge` | Scores, health metrics | `{ value, max, benchmark, trend }` |
| `bar` | Value comparisons | `{ clientValue, benchmarkValue, unit }` |
| `radar` | Multi-dimensional | `{ dimensions[], clientValues[], benchmarkValues[] }` |
| `comparison` | Metric tables | `{ metrics: [{ label, clientValue, benchmarkValue, status }] }` |
| `heatmap` | Matrices | `{ rows[], columns[], values[][] }` |
| `sparkline` | Trends | `{ points[], labels[], highlightLast }` |

---

### Phase 2: Deep-dive Cross-analysis

**File**: `src/orchestration/phase2-orchestrator.ts`
**Duration**: 2-3 minutes
**AI Calls**: 5 (via Anthropic Batch API)

| Analysis | Purpose | Key Outputs |
|----------|---------|-------------|
| Cross-Dimensional | Pattern identification across dimensions | Systemic insights, correlations |
| Strategic Recommendations | Prioritized action items | 15+ recommendations with ROI |
| Consolidated Risks | Comprehensive risk inventory | 18+ risks with severity/likelihood |
| Growth Opportunities | High-potential opportunities | 10+ growth areas with potential |
| Implementation Roadmap | Phased execution plan | 30/60/90/180/365 day phases |

---

### Phase 3: Executive Synthesis

**File**: `src/orchestration/phase3-orchestrator.ts`
**Duration**: 2-3 minutes
**AI Calls**: 5 (via Anthropic Batch API)

| Output | Purpose | Content |
|--------|---------|---------|
| Executive Summary | High-level overview | 2-3 page strategic summary |
| Scorecard | Quantified metrics | Overall score, chapter scores, trends |
| Action Matrix | Priority framework | Impact Ã— Urgency prioritization |
| Investment Roadmap | Financial planning | Investment requirements, ROI projections |
| Final Recommendations | Risk-adjusted guidance | Top 5-10 strategic priorities |

---

### Phase 4: IDM Consolidation

**File**: `src/orchestration/idm-consolidator.ts` (1,195 lines)
**Duration**: <1 second
**AI Calls**: None

#### Consolidation Functions

```typescript
// Main consolidation
function consolidateIDM(input: IDMConsolidatorInput): IDMConsolidationResult;

// Building blocks
function extractQuestions(responses: NormalizedQuestionnaireResponses): IDMQuestion[];
function buildDimensions(phase1: Phase1Results, phase2: Phase2Results): Dimension[];
function buildChapters(dimensions: Dimension[]): Chapter[];
function extractFindings(phase1: Phase1Results, phase2: Phase2Results): Finding[];
function extractRecommendations(...phases): Recommendation[];
function identifyQuickWins(recommendations: Recommendation[]): QuickWin[];
function extractRisks(...phases): Risk[];
function buildRoadmap(recommendations: Recommendation[], phase3: Phase3Results): RoadmapPhase[];
function calculateScores(dimensions: Dimension[], chapters: Chapter[]): ScoresSummary;
```

---

### Phase 5: Report Generation

**File**: `src/orchestration/phase5-orchestrator.ts` (780 lines)
**Duration**: ~100ms
**AI Calls**: None

#### Report Builders

| Builder File | Report Types |
|--------------|--------------|
| `comprehensive-report.builder.ts` | Comprehensive Assessment Report |
| `owners-report.builder.ts` | Business Owner Report |
| `executive-brief.builder.ts` | Executive Brief |
| `quick-wins-report.builder.ts` | Quick Wins Action Plan |
| `risk-report.builder.ts` | Risk Assessment Report |
| `roadmap-report.builder.ts` | Implementation Roadmap |
| `financial-report.builder.ts` | Financial Impact Analysis |
| `deep-dive-report.builder.ts` | 4 Chapter Deep Dives |
| `recipe-report.builder.ts` | 6 Manager Reports |

#### Output Directory Structure

```
output/reports/{run-id}/
â”œâ”€â”€ manifest.json              # Report inventory with metadata
â”œâ”€â”€ comprehensive.html         # ~50 pages, full assessment
â”œâ”€â”€ comprehensive.meta.json    # Report metadata
â”œâ”€â”€ owner.html                 # ~20 pages, owner-focused
â”œâ”€â”€ owner.meta.json
â”œâ”€â”€ executiveBrief.html       # 2-3 pages, quick overview
â”œâ”€â”€ quickWins.html            # Immediate actions
â”œâ”€â”€ risk.html                 # Risk inventory
â”œâ”€â”€ roadmap.html              # Implementation timeline
â”œâ”€â”€ financial.html            # ROI analysis
â”œâ”€â”€ deep-dive-ge.html         # Growth Engine deep dive
â”œâ”€â”€ deep-dive-ph.html         # Performance & Health
â”œâ”€â”€ deep-dive-pl.html         # People & Leadership
â”œâ”€â”€ deep-dive-rs.html         # Resilience & Safeguards
â”œâ”€â”€ employees.html            # All-hands communication
â”œâ”€â”€ managersOperations.html   # Operations managers
â”œâ”€â”€ managersSalesMarketing.html
â”œâ”€â”€ managersFinancials.html
â”œâ”€â”€ managersStrategy.html
â””â”€â”€ managersItTechnology.html
```

---

## The Insights Data Model (IDM)

**File**: `src/types/idm.types.ts` (890 lines)

### Complete Schema

```typescript
interface IDM {
  metadata: {
    assessment_run_id: string;
    company_profile_id: string;
    company_name: string;
    industry: string;
    assessment_date: string;
    generated_at: string;
    pipeline_version: string;
    idm_version: string;
  };

  scores_summary: {
    overall_health_score: number;  // 0-100
    overall_band: ScoreBand;       // Excellence/Proficiency/Attention/Critical
    chapter_scores: Record<ChapterCode, ChapterScore>;
    dimension_scores: Record<DimensionCode, number>;
    benchmarks: {
      overall_benchmark: number;
      industry_percentile: number;
    };
  };

  chapters: Chapter[];             // 4 chapters
  findings: Finding[];             // Key discoveries
  recommendations: Recommendation[];// Prioritized actions
  quick_wins: QuickWin[];          // Immediate wins
  risks: Risk[];                   // Identified threats
  roadmap: RoadmapPhase[];         // Implementation plan
  visualizations: Visualization[]; // Chart data
}

interface Chapter {
  code: ChapterCode;               // GE, PH, PL, RS
  name: string;
  description: string;
  score: number;
  band: ScoreBand;
  dimensions: Dimension[];         // 2-4 dimensions per chapter
  key_insights: string[];
  critical_issues: string[];
}

interface Dimension {
  code: DimensionCode;             // STR, SAL, MKT, etc.
  name: string;
  description: string;
  chapter: ChapterCode;
  score: number;
  band: ScoreBand;
  benchmark: number;
  trend: 'improving' | 'stable' | 'declining';
  questions: IDMQuestion[];
  sub_indicators: SubIndicator[];
  strengths: string[];
  weaknesses: string[];
  opportunities: string[];
  narrative: string;               // AI-generated analysis
}

interface Finding {
  id: string;
  type: 'strength' | 'weakness' | 'opportunity' | 'threat';
  severity: 'critical' | 'high' | 'medium' | 'low';
  dimension: DimensionCode;
  chapter: ChapterCode;
  title: string;
  description: string;
  evidence: string[];
  impact: string;
}

interface Recommendation {
  id: string;
  priority: 'critical' | 'high' | 'medium' | 'low';
  dimension: DimensionCode;
  chapter: ChapterCode;
  title: string;
  description: string;
  rationale: string;
  expected_impact: string;
  effort_level: 'low' | 'medium' | 'high';
  timeframe: 'immediate' | 'short-term' | 'medium-term' | 'long-term';
  dependencies: string[];
  success_metrics: string[];
  estimated_cost?: string;
  estimated_roi?: string;
}

interface QuickWin {
  id: string;
  dimension: DimensionCode;
  title: string;
  description: string;
  impact: 'high' | 'medium';
  effort: 'low';
  timeframe: 'immediate' | 'short-term';
  steps: string[];
  expected_outcome: string;
}

interface Risk {
  id: string;
  severity: 'critical' | 'high' | 'medium' | 'low';
  likelihood: 'high' | 'medium' | 'low';
  category: string;
  dimension: DimensionCode;
  chapter: ChapterCode;
  title: string;
  description: string;
  potential_impact: string;
  mitigation_strategy: string;
  owner?: string;
  timeline?: string;
}

interface RoadmapPhase {
  phase: number;
  name: string;
  timeframe: string;           // "0-30 days", "30-90 days", etc.
  focus_areas: string[];
  key_initiatives: RoadmapInitiative[];
  dependencies: string[];
  success_metrics: string[];
  estimated_investment: string;
  expected_outcomes: string[];
}
```

---

## Report Types & Audiences

### Executive Reports

| Report | File | Pages | Audience | Content |
|--------|------|-------|----------|---------|
| **Comprehensive** | `comprehensive.html` | ~50 | Board, Executives | Full analysis, all dimensions, complete roadmap |
| **Owner** | `owner.html` | ~20 | Business Owners | Strategic priorities, growth opportunities, key actions |
| **Executive Brief** | `executiveBrief.html` | 2-3 | C-Suite | One-page health snapshot, critical issues |

### Strategic Reports

| Report | File | Audience | Content |
|--------|------|----------|---------|
| **Quick Wins** | `quickWins.html` | Operations | High-impact, low-effort immediate actions |
| **Risk** | `risk.html` | Risk Committee | Complete risk inventory with mitigation |
| **Roadmap** | `roadmap.html` | Project Managers | 30/60/90/180/365 day implementation plan |
| **Financial** | `financial.html` | CFO, Finance | Investment requirements, ROI projections |

### Chapter Deep Dives

| Report | File | Dimensions | Focus |
|--------|------|------------|-------|
| **Growth Engine** | `deep-dive-ge.html` | STR, SAL, MKT, CXP | Revenue generation, market positioning |
| **Performance & Health** | `deep-dive-ph.html` | OPS, FIN | Operational efficiency, financial health |
| **People & Leadership** | `deep-dive-pl.html` | HRS, LDG | Talent, culture, leadership effectiveness |
| **Resilience & Safeguards** | `deep-dive-rs.html` | TIN, IDS, RMS, CMP | Technology, risk, compliance |

### Manager Reports

| Report | File | Target Role |
|--------|------|-------------|
| **Employees** | `employees.html` | All employees |
| **Operations** | `managersOperations.html` | COO, Operations Directors |
| **Sales & Marketing** | `managersSalesMarketing.html` | CSO, CMO |
| **Financials** | `managersFinancials.html` | CFO, Finance Directors |
| **Strategy** | `managersStrategy.html` | Chief Strategy Officer |
| **IT/Technology** | `managersItTechnology.html` | CTO, CIO |

---

## AI & Machine Learning

### Claude Opus 4.5 Configuration

```typescript
const AI_CONFIG = {
  model: 'claude-opus-4-5-20251101',
  max_tokens: 64000,
  thinking: {
    type: 'enabled',
    budget_tokens: 32000
  },
  temperature: 1.0  // Required for extended thinking
};
```

### Prompt Engineering

All prompts follow a consistent structure:

```typescript
// System Prompt: Defines AI persona and frameworks
const systemPrompt = `
# SYSTEM PROMPT: [Analysis Type]

### Your Role & Expertise
You are a senior business consultant with 20+ years of experience...

### Analytical Frameworks & Standards
- [Framework 1: Description]
- [Framework 2: Description]
...
`;

// User Prompt: Contains data and instructions
function buildUserPrompt(companyProfile, questionnaire, benchmarks) {
  return `
## COMPANY CONTEXT
${JSON.stringify(companyProfile)}

## QUESTIONNAIRE DATA
${JSON.stringify(questionnaire)}

## BENCHMARK DATA
${JSON.stringify(benchmarks)}

## ANALYSIS INSTRUCTIONS
[Specific instructions]

${VISUALIZATION_OUTPUT_INSTRUCTIONS}
  `;
}
```

### Batch API Integration

```typescript
// Batch processing for cost efficiency
async function createBatch(requests: BatchRequest[]): Promise<BatchJob> {
  const batch = await anthropic.messages.batches.create({
    requests: requests.map(req => ({
      custom_id: req.id,
      params: {
        model: AI_CONFIG.model,
        max_tokens: AI_CONFIG.max_tokens,
        messages: req.messages,
        thinking: AI_CONFIG.thinking,
        temperature: AI_CONFIG.temperature
      }
    }))
  });
  return batch;
}

// Poll until complete
async function pollBatch(batchId: string): Promise<BatchResult[]> {
  while (true) {
    const status = await anthropic.messages.batches.retrieve(batchId);
    if (status.processing_status === 'ended') {
      return await retrieveResults(batchId);
    }
    await delay(30000); // Poll every 30 seconds
  }
}
```

---

## Getting Started

### Prerequisites

- **Node.js**: 18.0.0 or higher (ES Modules support required)
- **TypeScript**: 5.x
- **Anthropic API Key**: With Claude Opus 4.5 access
- **npm**: 8.0.0 or higher

### Installation

```bash
# Clone the repository
git clone https://github.com/Stackked239/bizHealth-Dennis-11.29.25.git
cd bizHealth-Dennis-11.29.25-1

# Install dependencies
npm install --legacy-peer-deps

# Create environment file
cp .env.example .env

# Add your Anthropic API key to .env
echo "ANTHROPIC_API_KEY=your_api_key_here" >> .env
```

### Configuration

#### Environment Variables

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `ANTHROPIC_API_KEY` | **Yes** | - | Your Anthropic API key |
| `DEFAULT_MODEL` | No | `claude-opus-4-5-20251101` | Claude model ID |
| `DEFAULT_MAX_TOKENS` | No | `64000` | Maximum output tokens |
| `DEFAULT_THINKING_TOKENS` | No | `32000` | Extended thinking budget |
| `BATCH_POLL_INTERVAL_MS` | No | `30000` | Batch API poll interval |
| `BATCH_TIMEOUT_MS` | No | `3600000` | Batch API timeout (1 hour) |
| `LOG_LEVEL` | No | `info` | Logging level |
| `RENDER_PDF` | No | `false` | Generate PDF versions |

#### Sample `.env` File

```bash
# Required
ANTHROPIC_API_KEY=sk-ant-api03-...

# Optional AI Settings
DEFAULT_MODEL=claude-opus-4-5-20251101
DEFAULT_MAX_TOKENS=64000
DEFAULT_THINKING_TOKENS=32000

# Optional Pipeline Settings
BATCH_POLL_INTERVAL_MS=30000
BATCH_TIMEOUT_MS=3600000
LOG_LEVEL=info
```

### Running the Pipeline

#### Complete Pipeline (All Phases)

```bash
# Using npm script
npm run pipeline

# Using tsx directly
npx tsx src/run-pipeline.ts
```

#### Custom Input File

```bash
npx tsx src/run-pipeline.ts ./my-questionnaire.json
```

#### Specific Phases

```bash
# Run only Phase 0
npx tsx src/run-pipeline.ts --phase=0

# Run Phases 0-3 (stop before IDM consolidation)
npx tsx src/run-pipeline.ts --phase=0-3

# Run only Phase 5 (requires previous phases complete)
npx tsx src/run-pipeline.ts --phase=5
```

#### Pipeline Options

```bash
npx tsx src/run-pipeline.ts [webhook.json] [options]

Options:
  --phase=N           Run single phase (0-5)
  --phase=N-M         Run phase range
  --output-dir=DIR    Custom output directory
  --skip-db           Skip database storage (default)
  --use-db            Enable database storage
  --no-reports        Skip report generation
  --all-reports       Generate all 17 report types
  --company-name=NAME Override company name
  --render-pdf        Generate PDF versions
```

### Viewing Results

```bash
# Open comprehensive report in browser
open output/reports/*/comprehensive.html

# View pipeline summary
cat output/pipeline_summary.json

# View IDM data
cat output/idm_output.json | jq '.scores_summary'

# List all generated reports
ls -la output/reports/*/
```

---

## Project Structure

```
bizHealth-Dennis-11.29.25-1/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ run-pipeline.ts              # Main entry point
â”‚   â”œâ”€â”€ phase0-index.ts              # Phase 0 exports
â”‚   â”œâ”€â”€ index.ts                     # Package exports
â”‚   â”‚
â”‚   â”œâ”€â”€ orchestration/               # Phase Orchestrators
â”‚   â”‚   â”œâ”€â”€ phase0-orchestrator.ts   # Raw capture & normalization
â”‚   â”‚   â”œâ”€â”€ phase1-orchestrator.ts   # AI analyses (10)
â”‚   â”‚   â”œâ”€â”€ phase2-orchestrator.ts   # Cross-analysis (5)
â”‚   â”‚   â”œâ”€â”€ phase3-orchestrator.ts   # Executive synthesis (5)
â”‚   â”‚   â”œâ”€â”€ phase4-orchestrator.ts   # IDM consolidation
â”‚   â”‚   â”œâ”€â”€ phase5-orchestrator.ts   # Report generation
â”‚   â”‚   â”œâ”€â”€ idm-consolidator.ts      # IDM building logic (1195 lines)
â”‚   â”‚   â”œâ”€â”€ visualization-aggregator.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ reports/                 # Report Builders
â”‚   â”‚       â”œâ”€â”€ comprehensive-report.builder.ts
â”‚   â”‚       â”œâ”€â”€ owners-report.builder.ts
â”‚   â”‚       â”œâ”€â”€ executive-brief.builder.ts
â”‚   â”‚       â”œâ”€â”€ quick-wins-report.builder.ts
â”‚   â”‚       â”œâ”€â”€ risk-report.builder.ts
â”‚   â”‚       â”œâ”€â”€ roadmap-report.builder.ts
â”‚   â”‚       â”œâ”€â”€ financial-report.builder.ts
â”‚   â”‚       â”œâ”€â”€ deep-dive-report.builder.ts
â”‚   â”‚       â”œâ”€â”€ recipe-report.builder.ts
â”‚   â”‚       â”œâ”€â”€ html-template.ts
â”‚   â”‚       â”œâ”€â”€ index.ts
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ config/
â”‚   â”‚       â”‚   â”œâ”€â”€ section-mapping.ts
â”‚   â”‚       â”‚   â””â”€â”€ owner-report-constraints.ts
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ constants/
â”‚   â”‚       â”‚   â””â”€â”€ dimension-icons.ts
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ charts/              # D3.js Chart Generation
â”‚   â”‚       â”‚   â”œâ”€â”€ chart-renderer.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ d3-chart-renderer.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ chart-theme.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ chart-accessibility.ts
â”‚   â”‚       â”‚   â””â”€â”€ d3/
â”‚   â”‚       â”‚       â””â”€â”€ charts/
â”‚   â”‚       â”‚           â”œâ”€â”€ gauge-chart.ts
â”‚   â”‚       â”‚           â”œâ”€â”€ radar-chart.ts
â”‚   â”‚       â”‚           â”œâ”€â”€ bar-chart.ts
â”‚   â”‚       â”‚           â”œâ”€â”€ donut-chart.ts
â”‚   â”‚       â”‚           â”œâ”€â”€ heatmap-chart.ts
â”‚   â”‚       â”‚           â””â”€â”€ sparkline-chart.ts
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ components/          # Report Components
â”‚   â”‚       â”‚   â”œâ”€â”€ key-takeaways.component.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ score-bar.component.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ benchmark-callout.component.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ evidence-citation.component.ts
â”‚   â”‚       â”‚   â””â”€â”€ visual/
â”‚   â”‚       â”‚       â”œâ”€â”€ gauge.component.ts
â”‚   â”‚       â”‚       â”œâ”€â”€ radar-chart.component.ts
â”‚   â”‚       â”‚       â”œâ”€â”€ metric-card.component.ts
â”‚   â”‚       â”‚       â”œâ”€â”€ risk-matrix.component.ts
â”‚   â”‚       â”‚       â””â”€â”€ roadmap-timeline.component.ts
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ styles/              # CSS Styling
â”‚   â”‚       â”‚   â”œâ”€â”€ unified-bizhealth-styles.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ typography.css
â”‚   â”‚       â”‚   â”œâ”€â”€ variables.css
â”‚   â”‚       â”‚   â””â”€â”€ print.css
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ utils/
â”‚   â”‚           â”œâ”€â”€ markdown-sanitizer.ts
â”‚   â”‚           â”œâ”€â”€ number-formatter.ts
â”‚   â”‚           â””â”€â”€ color-utils.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                       # TypeScript Types
â”‚   â”‚   â”œâ”€â”€ idm.types.ts            # IDM schema (890 lines)
â”‚   â”‚   â”œâ”€â”€ webhook.types.ts        # Input types
â”‚   â”‚   â”œâ”€â”€ normalized.types.ts     # Normalized data
â”‚   â”‚   â”œâ”€â”€ company-profile.types.ts
â”‚   â”‚   â”œâ”€â”€ questionnaire.types.ts
â”‚   â”‚   â”œâ”€â”€ report.types.ts
â”‚   â”‚   â””â”€â”€ visualization.types.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ prompts/                     # AI Prompts
â”‚   â”‚   â”œâ”€â”€ tier1/
â”‚   â”‚   â”‚   â”œâ”€â”€ revenue-engine.prompts.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ operational-excellence.prompts.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ financial-strategic.prompts.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ people-leadership.prompts.ts
â”‚   â”‚   â”‚   â””â”€â”€ compliance-sustainability.prompts.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ tier2/
â”‚   â”‚   â”‚   â”œâ”€â”€ growth-readiness.prompts.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ market-position.prompts.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ resource-optimization.prompts.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ risk-resilience.prompts.ts
â”‚   â”‚   â”‚   â””â”€â”€ scalability-readiness.prompts.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ templates/
â”‚   â”‚       â”œâ”€â”€ base-analysis-prompt.ts
â”‚   â”‚       â””â”€â”€ visualization-supplement.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                    # Business Logic
â”‚   â”‚   â”œâ”€â”€ raw-assessment-storage.ts
â”‚   â”‚   â”œâ”€â”€ assessment-index.ts
â”‚   â”‚   â”œâ”€â”€ narrative-extraction.service.ts
â”‚   â”‚   â”œâ”€â”€ benchmark-lookup-service.ts
â”‚   â”‚   â””â”€â”€ confidence-scoring-framework.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ data-transformation/         # Transformers
â”‚   â”‚   â”œâ”€â”€ company-profile-transformer.ts
â”‚   â”‚   â”œâ”€â”€ questionnaire-transformer.ts
â”‚   â”‚   â”œâ”€â”€ normalized-company-profile-transformer.ts
â”‚   â”‚   â”œâ”€â”€ normalized-questionnaire-transformer.ts
â”‚   â”‚   â””â”€â”€ benchmark-service.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ validation/                  # Zod Schemas
â”‚   â”‚   â”œâ”€â”€ schemas.ts
â”‚   â”‚   â”œâ”€â”€ normalized.schemas.ts
â”‚   â”‚   â””â”€â”€ raw-input.schemas.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                         # API Clients
â”‚   â”‚   â”œâ”€â”€ anthropic-client.ts
â”‚   â”‚   â””â”€â”€ report-endpoints.ts
â”‚   â”‚
â”‚   â””â”€â”€ utils/                       # Utilities
â”‚       â”œâ”€â”€ logger.ts
â”‚       â”œâ”€â”€ errors.ts
â”‚       â””â”€â”€ security.ts
â”‚
â”œâ”€â”€ output/                          # Generated Outputs
â”‚   â”œâ”€â”€ phase0_output.json
â”‚   â”œâ”€â”€ phase1_output.json
â”‚   â”œâ”€â”€ phase2_output.json
â”‚   â”œâ”€â”€ phase3_output.json
â”‚   â”œâ”€â”€ phase4_output.json
â”‚   â”œâ”€â”€ phase5_output.json
â”‚   â”œâ”€â”€ idm_output.json
â”‚   â”œâ”€â”€ pipeline_summary.json
â”‚   â””â”€â”€ reports/{run-id}/            # HTML Reports
â”‚
â”œâ”€â”€ data/                            # Data Storage
â”‚   â”œâ”€â”€ raw/                         # Immutable raw data
â”‚   â”œâ”€â”€ normalized/                  # Normalized data
â”‚   â”œâ”€â”€ index/                       # Assessment index
â”‚   â””â”€â”€ logs/                        # Audit logs
â”‚
â”œâ”€â”€ sample_webhook.json              # Sample input data
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ .env                             # Environment variables (gitignored)
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md                        # This file
â””â”€â”€ CODEBASE_ANALYSIS.md            # Technical deep dive
```

---

## Technology Stack

### Core Technologies

| Technology | Version | Purpose |
|------------|---------|---------|
| **TypeScript** | 5.x | Type-safe development |
| **Node.js** | 18+ | ES Modules runtime |
| **Anthropic SDK** | Latest | Claude API integration |
| **Zod** | 3.x | Runtime schema validation |
| **Pino** | Latest | Structured logging |
| **D3.js** | 7.x | Chart generation |
| **UUID** | 9.x | Unique identifiers |
| **dotenv** | Latest | Environment configuration |

### AI Model Specifications

| Property | Value |
|----------|-------|
| **Model** | Claude Opus 4.5 (`claude-opus-4-5-20251101`) |
| **Max Output Tokens** | 64,000 |
| **Thinking Budget** | 32,000 tokens |
| **Temperature** | 1.0 (required for extended thinking) |
| **API** | Anthropic Batch API |
| **Cost Reduction** | 50% via Batch API |

### Branding Colors

```css
:root {
  --biz-navy: #212653;      /* Primary brand color */
  --biz-green: #969423;     /* Accent color */
  --biz-grey: #7C7C7C;      /* Text color */

  /* Score bands */
  --band-excellence: #28a745;
  --band-proficiency: #0d6efd;
  --band-attention: #ffc107;
  --band-critical: #dc3545;
}
```

---

## API Reference

### Pipeline Runner

```typescript
// Main entry point
import { runPipeline } from './src/run-pipeline.ts';

const result = await runPipeline({
  webhookPath: './sample_webhook.json',
  phases: [0, 1, 2, 3, 4, 5],
  outputDir: './output',
  reportTypes: 'all'
});
```

### Phase Orchestrators

```typescript
// Phase 0
import { Phase0Orchestrator } from './src/orchestration/phase0-orchestrator.ts';
const phase0Result = await Phase0Orchestrator.execute(webhookPayload);

// Phase 1
import { Phase1Orchestrator } from './src/orchestration/phase1-orchestrator.ts';
const phase1Result = await Phase1Orchestrator.execute(phase0Output);

// Phase 4 (IDM)
import { consolidateIDM } from './src/orchestration/idm-consolidator.ts';
const idmResult = consolidateIDM({
  companyProfile: phase0Output.companyProfile,
  questionnaireResponses: phase0Output.questionnaireResponses,
  phase1Results,
  phase2Results,
  phase3Results
});
```

### Report Generation

```typescript
import { buildComprehensiveReport } from './src/orchestration/reports/comprehensive-report.builder.ts';

const report = await buildComprehensiveReport(reportContext, {
  brand: {
    primaryColor: '#212653',
    accentColor: '#969423'
  }
});
```

---

## Performance & Cost

### Execution Times

| Phase | Duration | Description |
|-------|----------|-------------|
| Phase 0 | ~100ms | Data normalization (no AI) |
| Phase 1 Tier 1 | 2-3 min | 5 foundational analyses |
| Phase 1 Tier 2 | 2-3 min | 5 interconnection analyses |
| Phase 2 | 2-3 min | 5 synthesis analyses |
| Phase 3 | 2-3 min | 5 executive outputs |
| Phase 4 | <1 sec | IDM consolidation (no AI) |
| Phase 5 | ~100ms | 17 reports generated (no AI) |
| **Total** | **10-15 min** | Complete pipeline |

### Token Usage

| Phase | Input Tokens | Output Tokens | Thinking Tokens |
|-------|--------------|---------------|-----------------|
| Phase 1 Tier 1 | ~50K | ~100K | ~150K |
| Phase 1 Tier 2 | ~80K | ~80K | ~150K |
| Phase 2 | ~60K | ~60K | ~100K |
| Phase 3 | ~40K | ~40K | ~80K |
| **Total** | **~230K** | **~280K** | **~480K** |

### Cost Estimation

```
Anthropic Batch API Pricing (50% discount):
- Input:  $7.50 / 1M tokens
- Output: $37.50 / 1M tokens

Cost per Assessment:
- Input:  230K Ã— $7.50 / 1M  = $1.73
- Output: 280K Ã— $37.50 / 1M = $10.50
- Total: ~$12-15 per assessment

With Extended Thinking (~480K additional):
- Total: ~$15-20 per assessment
```

---

## Troubleshooting

### Common Issues

#### `tsx` command not found

```bash
# Install tsx globally
npm install -g tsx

# Or run via npx
npx tsx src/run-pipeline.ts
```

#### npm peer dependency conflicts

```bash
# Use legacy peer deps flag
npm install --legacy-peer-deps
```

#### Anthropic API errors

```bash
# Check API key is set
echo $ANTHROPIC_API_KEY

# Verify in .env file
cat .env | grep ANTHROPIC
```

#### Batch timeout

```bash
# Increase timeout in .env
BATCH_TIMEOUT_MS=7200000  # 2 hours
```

### Logs

```bash
# View pipeline logs
tail -f output/pipeline.log

# View specific phase output
cat output/phase1_output.json | jq '.status'
```

---

## Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

---

## License

[License Information]

---

## Support

- **Issues**: [GitHub Issues](https://github.com/Stackked239/bizHealth-Dennis-11.29.25/issues)
- **Documentation**: See `CODEBASE_ANALYSIS.md` for technical deep dive
- **API Reference**: Type definitions in `src/types/`

---

<p align="center">
  <strong>BizHealth Report Pipeline</strong><br>
  Enterprise Business Intelligence Powered by Claude Opus 4.5
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Made%20with-TypeScript-blue?style=flat-square" alt="TypeScript" />
  <img src="https://img.shields.io/badge/AI-Claude%20Opus%204.5-purple?style=flat-square" alt="Claude" />
  <img src="https://img.shields.io/badge/Reports-17%20Types-green?style=flat-square" alt="Reports" />
</p>
